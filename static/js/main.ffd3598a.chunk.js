(this["webpackJsonpesplight-client"]=this["webpackJsonpesplight-client"]||[]).push([[0],{37:function(e,n,t){},59:function(e,n,t){"use strict";t.r(n);var c,r,i,o,a,s,d,l,b,u,j,h,p,x,g,O,f,m=t(1),v=t.n(m),k=t(11),w=t.n(k),C=(t(37),t(6)),y=t(8),T=t(3),U=t(4),S={primary:"#21a0a0",navbar:"#046865",background:"#eaeaea"},z=t(2),H=U.a.div(c||(c=Object(T.a)(["\n  height: 100vh;\n  background-color: ",";\n"])),S.background),M=function(e){var n=e.children;return Object(z.jsx)(H,{children:n})},A=U.a.div(r||(r=Object(T.a)(["\n  height: ","px;\n"])),(function(e){return e.height||10})),I=t(9),D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(m.useState)(e),t=Object(C.a)(n,2),c=t[0],r=t[1],i=Object(m.useCallback)((function(){return r((function(e){return!e}))}),[]);return[c,i]},E=t(15),F=t.n(E),J="esplightserver",L=Object(m.createContext)({}),q=function(e){var n=e.children,t=Object(m.useState)(localStorage.getItem(J)||""),c=Object(C.a)(t,2),r=c[0],i=c[1];return Object(z.jsx)(L.Provider,{value:{serverUrl:r,setServerUrl:i},children:n})},B=function(){var e=Object(m.useContext)(L),n=e.serverUrl,t=e.setServerUrl;return{api:Object(m.useMemo)((function(){return F.a.create({baseURL:n})}),[n]),serverUrl:n,setServerUrl:t}},P=U.a.div(i||(i=Object(T.a)(["\n  border-radius: 10px;\n  background-color: white;\n  color: black;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n"]))),R=U.a.div(o||(o=Object(T.a)(["\n  height: 100%;\n  z-index: 9;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  background-color: ",";\n\n  display: flex;\n  flex-direction: column;\n  padding: 0 20px 0 20px;\n"])),S.background),$=U.a.div(a||(a=Object(T.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  h1 {\n    color: ",";\n  }\n"])),S.primary),G=U.a.input(s||(s=Object(T.a)(["\n  /* background-color: ","; */\n  border-radius: 10px;\n  border: 1px solid black;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  text-indent: 10px;\n\n  :focus {\n    outline: none;\n  }\n"])),S.primary),K=U.a.button(d||(d=Object(T.a)(["\n  background-color: ",";\n  color: white;\n  font-weight: bold;\n  width: 100%;\n  border-radius: 10px;\n  border: none;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  font-size: 1rem;\n"])),S.primary),N=function(e){var n=e.children;return Object(z.jsx)(R,{children:n})},Q=function(e){var n=e.toggle,t=B(),c=Object(m.useState)(t.serverUrl),r=Object(C.a)(c,2),i=r[0],o=r[1];return Object(z.jsxs)(N,{children:[Object(z.jsxs)($,{children:[Object(z.jsx)("h1",{children:"Settings"}),Object(z.jsx)(I.c,{color:"black",size:20,onClick:function(){return n()}})]}),Object(z.jsxs)(P,{children:[Object(z.jsx)("label",{htmlFor:"ipv4",children:"Server ipv4"}),Object(z.jsx)(A,{}),Object(z.jsx)(G,{id:"ipv4",type:"url",name:"ip",value:i,placeholder:"type server ip here",pattern:"^((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])$",onChange:function(e){var n,t=e.target;return n=t.value,void o(n.includes("http")?n:"http://".concat(n))}}),Object(z.jsx)(A,{}),Object(z.jsx)(K,{onClick:function(){F.a.get("".concat(i,"/verify")).then((function(){return y.a.success("success, server connected")})).catch((function(e){return y.a.error("server not found")}))},children:"Test"}),Object(z.jsx)(A,{}),Object(z.jsx)(K,{onClick:function(){return window.localStorage.setItem(J,i),y.a.success("ip saved"),void t.setServerUrl(i)},children:"Save"})]})]})},V=U.a.header(l||(l=Object(T.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ",";\n  color: white;\n  padding: 0 20px 0 20px;\n  box-shadow: 0px 0px 19px -4px #000000;\n  height: 60px;\n"])),S.navbar),W=function(){var e=D(!1),n=Object(C.a)(e,2),t=n[0],c=n[1];return Object(z.jsxs)(V,{children:[Object(z.jsx)("h1",{children:"\ud83d\udc1f Esplight"}),Object(z.jsx)(I.b,{size:30,onClick:function(){return c()}}),t&&Object(z.jsx)(Q,{toggle:function(){return c()}})]})},X=t(10),Y=t(31),Z=function(e){var n=e.toggle,t=e.times,c=e.editTimes,r=Object(m.useState)(),i=Object(C.a)(r,2),o=i[0],a=i[1];return Object(z.jsxs)(N,{children:[Object(z.jsxs)($,{children:[Object(z.jsx)("h1",{children:"Add new Time"}),Object(z.jsx)(I.c,{color:"black",size:20,onClick:function(){return n()}})]}),Object(z.jsxs)(P,{children:[Object(z.jsx)("label",{htmlFor:"time",children:"Time"}),Object(z.jsx)(A,{}),Object(z.jsx)(G,{type:"time",id:"time",name:"time",min:"00:00",max:"23:59",required:!0,onChange:function(e){var n=e.target;return a(n.valueAsDate)}}),Object(z.jsx)(A,{}),Object(z.jsx)(K,{onClick:function(){return function(){if(o){var e=Object(X.a)(t),r=o.getTimezoneOffset()/60;e.push({h:o.getUTCHours()+r,m:o.getUTCMinutes(),c:[0,0,0,0]}),e.sort((function(e,n){return e.h-n.h||e.m-n.m})),c(e),n()}}()},children:"Add"})]})]})},_=U.a.table(b||(b=Object(T.a)(["\n  width: 100%;\n  text-align: center;\n\n  /* border-collapse: collapse; */\n  margin: 0;\n  padding: 0;\n  table-layout: fixed;\n\n  caption {\n    font-size: 1.5em;\n    margin: 0.5em 0 0.75em;\n  }\n\n  @media screen and (max-width: 600px) {\n    & {\n      border: 0;\n    }\n\n    & caption {\n      font-size: 1.3em;\n    }\n\n    & thead {\n      border: none;\n      clip: rect(0 0 0 0);\n      height: 1px;\n      margin: -1px;\n      overflow: hidden;\n      padding: 0;\n      position: absolute;\n      width: 1px;\n    }\n\n    & tr {\n      border-bottom: 3px solid #ddd;\n      display: block;\n      margin-bottom: 0.625em;\n      margin: 5px;\n      padding: 10px;\n      background-color: white;\n      border-radius: 10px;\n    }\n\n    & td {\n      border-bottom: 1px solid #ddd;\n      display: block;\n      font-size: 0.8em;\n      text-align: right;\n    }\n\n    & td::before {\n      /*\n    * aria-label has no advantage, it won't be read inside a table\n    content: attr(aria-label);\n    */\n      content: attr(data-label);\n      float: left;\n      font-weight: bold;\n      text-transform: uppercase;\n    }\n\n    & td:last-child {\n      border-bottom: 0;\n    }\n\n    input {\n      text-align: right;\n    }\n  }\n"]))),ee=U.a.thead(u||(u=Object(T.a)(["\n  background-color: ",";\n  color: white;\n"])),S.navbar),ne=(U.a.tfoot(j||(j=Object(T.a)(["\n  // custom css goes here\n"]))),U.a.tbody(h||(h=Object(T.a)(["\n  // custom css goes here\n"])))),te=U.a.tr(p||(p=Object(T.a)(["\n  @media screen and (min-width: 600px) {\n    :nth-child(even) {\n      background-color: #f2f2f2;\n    }\n  }\n"]))),ce=(U.a.th(x||(x=Object(T.a)(["\n  // custom css goes here\n"]))),U.a.td(g||(g=Object(T.a)([""])))),re=U.a.div(O||(O=Object(T.a)(["\n  right: 20px;\n  bottom: 20px;\n  position: fixed;\n\n  padding: 15px;\n  background-color: ",";\n  border-radius: 50%;\n\n  box-shadow: 5px 5px 15px -5px rgba(0, 0, 0, 0.34);\n\n  cursor: pointer;\n\n  :hover {\n    transform: scale(1.05);\n  }\n"])),S.primary),ie=U.a.input(f||(f=Object(T.a)(["\n  background-color: inherit;\n  display: table-cell;\n  /* width: 100%; */\n  /* padding: 10px; */\n  border: none;\n  text-align: center;\n  /* margin: 0px; */\n  :focus {\n    /* width: 100%; */\n    outline: -webkit-focus-ring-color auto 1px;\n  }\n"]))),oe=function(e){var n=e.times,t=e.editTimes,c=D(!1),r=Object(C.a)(c,2),i=r[0],o=r[1];return Object(z.jsxs)(z.Fragment,{children:[i&&Object(z.jsx)(Z,{times:n,toggle:o,editTimes:t}),Object(z.jsx)(re,{onClick:function(){return o()},children:Object(z.jsx)(Y.a,{color:"white"})}),Object(z.jsxs)(_,{children:[Object(z.jsx)("caption",{children:"Light Times"}),Object(z.jsx)(ee,{children:Object(z.jsxs)(te,{children:[Object(z.jsx)("th",{scope:"col",children:"Time"}),Object(z.jsx)("th",{scope:"col",children:"CH1"}),Object(z.jsx)("th",{scope:"col",children:"CH2"}),Object(z.jsx)("th",{scope:"col",children:"CH3"}),Object(z.jsx)("th",{scope:"col",children:"CH4"}),Object(z.jsx)("th",{scope:"col"})]})}),Object(z.jsx)(ne,{children:n.map((function(e,c){var r=new Date;r.setUTCHours(e.h),r.setUTCMinutes(e.m);var i=r.getHours(),o=r.getMinutes(),a="".concat(i<10?"0":"").concat(i,":").concat(o<10?"0":"").concat(o);return Object(z.jsxs)(te,{children:[Object(z.jsx)(ce,{"data-label":"Time",scope:"row",children:Object(z.jsx)(ie,{type:"time",value:a,onChange:function(e){return function(e,c){if(e){var r=e.getTimezoneOffset()/60,i=Object(X.a)(n);i[c].h=e.getUTCHours()+r,i[c].m=e.getUTCMinutes(),t(i)}}(e.target.valueAsDate,c)}})}),e.c.map((function(e,r){return Object(z.jsx)(ce,{"data-label":"ch".concat(r),children:Object(z.jsx)(ie,{value:"".concat(e,"%"),onChange:function(e){return function(e,c,r){var i;e=(null===(i=e.match(/\d+/g))||void 0===i?void 0:i.join(""))||"0",console.log(e);var o=Object(X.a)(n);o[c].c[r]=parseInt(e),t(o)}(e.target.value,c,r)}})})})),Object(z.jsx)(ce,{"data-label":"action",children:Object(z.jsx)(I.a,{onClick:function(){return function(e,c){if(window.confirm("confirm delete of time ".concat(e,"?"))){var r=Object(X.a)(n);r.splice(c,1),t(r)}}(a,c)}})})]},"row".concat(c))}))})]})]})},ae=t(32);var se=function(){var e=B(),n=Object(m.useState)([]),t=Object(C.a)(n,2),c=t[0],r=t[1],i=Object(m.useState)(),o=Object(C.a)(i,2),a=o[0],s=o[1];return Object(m.useEffect)((function(){e.serverUrl?e.api.get("/light-times").then((function(e){var n=e.data;y.a.success("loaded light times"),r(n)})).catch((function(){y.a.error("error when load data, check your device")})):y.a.info("no server found in configuration, please add before use")}),[e.serverUrl,e.api]),Object(ae.a)((function(){e.serverUrl&&a&&e.api.put("/light-times",a).then((function(e){var n=e.data;y.a.success("saved light times"),r(n)})).catch((function(){y.a.error("error when save data, check your device")}))}),750,[a]),Object(z.jsxs)(M,{children:[Object(z.jsx)(W,{}),Object(z.jsx)(A,{height:20}),Object(z.jsx)(oe,{times:c,editTimes:s})]})};w.a.render(Object(z.jsx)(v.a.StrictMode,{children:Object(z.jsx)(q,{children:Object(z.jsx)(se,{})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.ffd3598a.chunk.js.map